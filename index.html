<!DOCTYPE HTML>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Labyrinthe</title>
		<link rel="stylesheet" href="style.css" title="style" type="text/css" media="screen" charset="utf-8">
		<script type="text/javascript" src="js/jquery.js" ></script>
		<script type="text/javascript" src="js/variables.js" ></script>
		<script type="text/javascript" src="functions.js" ></script>
		<script type="text/javascript" src="jsons.js" ></script>
			</head>
	<body onkeydown="keyDown(event)" onkeyup="keyUp(event)">
		<div id = "container">
			<canvas id="Canvas" class="map" width="880" height='660'>
			</canvas>
			<div class="results"></div>
			<div class="interface">
				<div class="trigger">
					Créer un Labyrinthe...
				</div>
				<div class="info">
					<table>
						<tr>
							<td>GOLD</td><td class="sep">:</td><td class="gold results"></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			// initialise le Canvas
			var canvas = document.getElementById('Canvas');
			var context = canvas.getContext('2d');
			
			
		    
		    // Variables
			var	map_utilities = { // variables utiles lors de la création de la carte
					"id" : 0 ,
					"x" : 0 ,
					"y" : 0 ,
					"random" : 0 ,
					"limit_x" : 60 ,
					"limit_y" : 30 ,
				},
				visual_map = { // informations du rendu du jeu (taille de la fenêtre, ratio, etc...)
					"ratio" :55,
					"x" : 0 ,
					"y" : 0 ,
					"width" : 16 ,
					"height" : 14 ,
					"eq_x" : 0 ,
					"eq_y" : 0 ,
					"scrolled_x" : 0 ,
					"scrolled_y" : 0 ,
					"to_scroll_x" : 0 ,
					"to_scroll_y" : 0 ,
					"scroll_state_x" : 0 ,
					"scroll_state_y" : 0 
				},		
				virtual_map = [ ], // Variable qui contiendra toutes les informations de la carte
				ligne = [ ], // variable utile lors de la création de la carte
				index = [ ], // index des cases de la carte qui sera utile pour retrouver les cases par leur ID
				my_character = { // variable contenant les informations du personnage
					"name" : "Isildur" , 
					"x" : 20 , 
					"y" : 20 ,
					"current_speed_x" : 0 ,
					"current_speed_y" : 0 ,
					"max_speed" : 3 , 
					"case_id" : "" , 
					"next_case" : "" ,
					"eq_x" : 1 ,
					"eq_y" : 1 ,
					"width" : 0.4 , 
					"height" : 0.8 ,
					"scroll_x" : 0 ,
					"scroll_y" : 0 ,
					"sprite" : "" ,
					"frame" : 0 , 
					"max_frame" : 4,
					"sens" : 0 ,
					"inventaire" : {
							"gold" : 0 
						}
				},
				controller = { // Variable controllers
					"left" : 0 ,
					"up" : 0 ,
					"right" : 0 ,
					"down" : 0 , 
				},
				path = { // Variable pour le chemin aléatoire
					"currentx" : 0 ,
					"currenty" : 0 ,
					"coming" : 0 ,
					"going" : 0 ,
				},
				end = { // Variable qui contient les informations de la case de fin de niveau
					"x" : 0,
					"y" : 0
				},
				map_objects = { // Variable qui contiendra les informations concernant les objets de la carte (pépites d'or, etc...)
					"sprite" : "" 
				},
				GameHeart; // Variable pour le setInterval du moteur du jeu
				
			// Création de la map et Lancement du jeu
			$(document).ready(function(){
				$(".trigger").click(function(){
					load_sprites();	// Charge les sprites
					create_map(map_utilities.limit_x,map_utilities.limit_y); // Crée la carte
					set_frames(); // Commence le moteur d'animations
					GameHeart = setInterval(function(){engine()},1000/60); // Commence le moteur du jeu
					$(".trigger").css("display" , "none"); // Cache le bouton de démarrage
				});
			});
		</script>
	</body>
</html>
