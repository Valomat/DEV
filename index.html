<!DOCTYPE HTML>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Labyrinthe</title>
		<link rel="stylesheet" href="style.css" title="style" type="text/css" media="screen" charset="utf-8">
		<script type="text/javascript" src="js/jquery.js" ></script>
		<script type="text/javascript" src="js/variables.js" ></script>
		<script type="text/javascript" src="functions.js" ></script>
		<script type="text/javascript" src="jsons.js" ></script>
			</head>
	<body onkeydown="keyDown(event)" onkeyup="keyUp(event)">
		<div id = "container">
			<canvas id="Canvas" class="map" width="880" height='660'>
			</canvas>
			<div class="results"></div>
			<div class="interface">
				<div class="trigger">
					Créer un Labyrinthe...
				</div>
				<div class="info">
					<table>
						<tr>
							<td>Coordonnées X</td><td class="sep">:</td><td class="cor_x results"></td>
						</tr>
						<tr>
							<td>Coordonnées Y</td><td class="sep">:</td><td class="cor_y results"></td>
						</tr>
						<tr>
							<td>ID de la case :</td><td class="sep">:</td><td class="id results"></td>
						</tr>
						<tr>
							<td>Vitesse X</td><td class="sep">:</td><td class="v_x results"></td>
						</tr>
						<tr>
							<td>Vitesse Y</td><td class="sep">:</td><td class="v_y results"></td>
						</tr>
						<tr>
							<td>Position dans la case en X</td><td class="sep">:</td><td class="sm_x results"></td>
						</tr>
						<tr>
							<td>Position dans la case en Y</td><td class="sep">:</td><td class="sm_y results"></td>
						</tr>
						<tr>
							<td>Contenu</td><td class="sep">:</td><td class="content results"></td>
						</tr>
						<tr>
							<td>Map X</td><td class="sep">:</td><td class="map_x results"></td>
						</tr>
						<tr>
							<td>Map Y</td><td class="sep">:</td><td class="map_y results"></td>
						</tr>
						<tr>
							<td>End X</td><td class="sep">:</td><td class="end_x results"></td>
						</tr>
						<tr>
							<td>End Y</td><td class="sep">:</td><td class="end_y results"></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
		<script type="text/javascript">
		
			// initialise le Canvas
		
			var canvas = document.getElementById('Canvas');
			var context = canvas.getContext('2d');
			
			
		    
		    // Variables utiles
				
			var	map_utilities = { // variables utiles lors de la création de la map
					"id" : 0 ,
					"x" : 0 ,
					"y" : 0 ,
					"random" : 0 ,
					"limit_x" : 30 ,
					"limit_y" : 30 ,
				},
				visual_map = {
					"ratio" :55,
					"x" : 0 ,
					"y" : 0 ,
					"width" : 16 ,
					"height" : 14 ,
					"eq_x" : 0 ,
					"eq_y" : 0 ,
					"scrolled_x" : 0 ,
					"scrolled_y" : 0 ,
					"to_scroll_x" : 0 ,
					"to_scroll_y" : 0 ,
					"scroll_state_x" : 0 ,
					"scroll_state_y" : 0 
				},		
				virtual_map = [ ],
				ligne = [ ],
				index = [ ],
				my_character = { 
					"name" : "Isildur" , 
					"x" : 1 , 
					"y" : 1 ,
					"current_speed_x" : 0 ,
					"current_speed_y" : 0 ,
					"max_speed" : 3 , 
					"case_id" : "" , 
					"next_case" : "" ,
					"eq_x" : 1 ,
					"eq_y" : 1 ,
					"width" : 0.3 , 
					"height" : 0.6 ,
					"scroll_x" : 0 ,
					"scroll_y" : 0 ,
					"sprite" : "" ,
					"frame" : 0 , 
					"max_frame" : 4,
					"sens" : 0
				},
				controller = {
					"left" : 0 ,
					"up" : 0 ,
					"right" : 0 ,
					"down" : 0 , 
				},
				path = {
					"currentx" : 0 ,
					"currenty" : 0 ,
					"coming" : 0 ,
					"going" : 0 ,
				},
				end = {
					"x" : 0,
					"y" : 0
				},
				map_objects = {
					"sprite" : "" 
				},
				GameHeart;
				
			// Création de la map et Lancement du jeu
						
			$(document).ready(function(){
				$(".trigger").click(function(){
					load_sprites();	
					set_frames();
					create_map(map_utilities.limit_x,map_utilities.limit_y);	 // Crée la carte
					GameHeart = setInterval(function(){engine()},1000/60); 
					$(".trigger").css("display" , "none"); // Cache le bouton de démarrage
				});
			});
		</script>
	</body>
</html>
